(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{508:function(s,a,n){s.exports=n.p+"assets/img/image-20210315181528915.08174230.png"},509:function(s,a,n){s.exports=n.p+"assets/img/image-20210315181622517.79396d08.png"},510:function(s,a,n){s.exports=n.p+"assets/img/image-20210315183622449.b33c6b3b.png"},638:function(s,a,n){"use strict";n.r(a);var t=n(18),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"开发改造"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发改造"}},[s._v("#")]),s._v(" 开发改造")]),s._v(" "),t("blockquote",[t("p",[s._v("软引用替换修改后及"),t("code",[s._v("view.xml修改后")]),s._v("，记得重启"),t("code",[s._v("sudo ambari-server restart")]),s._v("才能生效，否则会404;")])]),s._v(" "),t("h3",{attrs:{id:"web注意点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web注意点"}},[s._v("#")]),s._v(" web注意点")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("项目使用的"),t("code",[s._v("brunch1.x")]),s._v("没有相关的代理功能；(2.x上已经实现)；后面只能通过脚本替换接口前缀；")]),s._v(" "),t("p",[t("code",[s._v("sed -i '' 's#^App.apiPrefix.*#App.apiPrefix = \\\"/api/v1\\\"; #g' app/config.js")])])]),s._v(" "),t("li",[t("p",[s._v("因还没有找到好的代码代理方式，目前要通过浏览器启动代理设置启动页面；")])])]),s._v(" "),t("h3",{attrs:{id:"admin注意点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#admin注意点"}},[s._v("#")]),s._v(" admin注意点")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("考虑到"),t("code",[s._v("bower install")]),s._v("安装慢，可以提前用内置的依赖库;")]),s._v(" "),t("p",[t("code",[s._v("wdp-web/ambari-admin/main/resources/ui/admin-web/app/assets/zip")])]),s._v(" "),t("p",[t("code",[s._v("unzip -o ${admDir}/app/assets/zip/bower_components.zip -d ${admDir}/app/")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("wdp-web/ambari-admin/main/resources/view.xml")]),s._v("也记得保留在静态目录下；")])]),s._v(" "),t("li",[t("p",[s._v("代理接口设置通过"),t("code",[s._v("http-proxy-middleware")]),s._v("处理，后端设置免登录接口cookie验证后即可代理使用；")])])]),s._v(" "),t("h2",{attrs:{id:"构建部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建部署"}},[s._v("#")]),s._v(" 构建部署")]),s._v(" "),t("h3",{attrs:{id:"临时部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#临时部署"}},[s._v("#")]),s._v(" 临时部署")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("wdp-web")]),s._v("目录下，新建"),t("code",[s._v("zdeploy.js")]),s._v("，运行脚本"),t("code",[s._v("sh deploy.sh true && bdp deploy")]),s._v("，再选择对应的服务器部署；")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n * @Author: samy\n * @email: yessz#foxmail.com\n * @time: 2021-02-24 09:25:03\n * @modAuthor: samy\n * @modTime: 2021-03-15 09:47:08\n * @desc: 部署脚本配置\n * @Copyright © 2015~2021 BDP FE\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开发环境"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.45.47.xx"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"iwdp"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        serverDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/iwdp/fe-deploy/dist/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"22"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        localDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"jks配置部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jks配置部署"}},[s._v("#")]),s._v(" jks配置部署")]),s._v(" "),t("p",[t("img",{attrs:{src:n(508),alt:"image-20210315181528915"}})]),s._v(" "),t("p",[t("img",{attrs:{src:n(509),alt:"image-20210315181622517"}})]),s._v(" "),t("p",[t("img",{attrs:{src:n(510),alt:"image-20210315183622449"}})]),s._v(" "),t("p",[s._v("归档成品存放的位置：每一次归档文件，都放在一个单独的文件夹（以build号命名）里；")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JENKINS_HOME}")]),s._v("/jobs/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JOB_NAME}")]),s._v("/builds/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILD_NUMBER}")]),s._v("/archive\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"相关脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关脚本"}},[s._v("#")]),s._v(" 相关脚本")]),s._v(" "),t("p",[t("code",[s._v("build.sh")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @Author: samy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @email: yessz#foxmail.com")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @time: 2021-03-11 15:59:05")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modAuthor: samy")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modTime: 2021-03-15 17:36:14")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @desc: 构建部署脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copyright © 2015~2021 BDP FE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("curDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("distWebDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dist/web\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("distAdmDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dist/admin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSkipBowerInstall")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("webDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("admDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-admin/main/resources/ui/admin-web\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目===环境依赖==node版本====="')]),s._v("\nnode -v\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/dist "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v("/pulic "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${admDir}")]),s._v("/dist\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distWebDir}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distAdmDir}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目===web===="')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$OSTYPE")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"darwin"')]),s._v("* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"s#^App.apiPrefix.*#App.apiPrefix = '/api/v1'; #g\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web/app/config.js\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"s#^App.apiPrefix.*#App.apiPrefix = '/api/v1'; #g\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-web/app/config.js\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==web项目==config中的apiPrefix===替换成功===="')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==web项目===构建成功===="')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -R public/* "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distWebDir}")]),s._v("/\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==web项目===拷贝成功===="')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目===adm===="')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${admDir}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -z "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$isSkipBowerInstall")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目===adm项目====bower install==命令========="')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -g bower --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n    bower "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这一步下载估计会很慢")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"====wdp-web项目====adm项目====bower使用==zip==命令========="')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -o "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${admDir}")]),s._v("/app/assets/zip/bower_components.zip -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${admDir}")]),s._v("/app/\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==adm项目===构建成功===="')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -R dist/* "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distAdmDir}")]),s._v("/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/ambari-admin/main/resources/view.xml "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${curDir}")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distAdmDir}")]),s._v("/\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"==wdp-web==adm项目===拷贝成功===="')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br")])]),t("p",[t("code",[s._v("getdist.sh")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @Author: samy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @email: yessz#foxmail.com")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @time: 2021-03-11 15:59:05")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modAuthor: samy")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modTime: 2021-03-15 17:36:14")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @desc: 拉取dist脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copyright © 2015~2021 BDP FE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v("  -niv  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".47.x\nuser  jkusexx  xx\nbinary\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  /var/lib/jenkins/workspace/wdp-web-develop\nlcd  /home/iwdp/fe-deploy\nprompt\nget  dist.zip\nclose\nbye\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -la\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datetime")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y%m%d%H%M%S"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf dist\n/usr/bin/unzip dist.zip\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#rm -f dist.zip")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" bak\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" dist.zip bak/dist-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${datetime}")]),s._v(".zip\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"解压成功,部署成功"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[t("code",[s._v("replace.sh")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @Author: samy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @email: yessz#foxmail.com")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @time: 2021-03-11 15:59:05")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modAuthor: samy")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @modTime: 2021-03-15 17:24:01")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# @desc: dist引用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copyright © 2015~2021 BDP FE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("distDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/iwdp/fe-deploy/dist\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("webDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/lib/ambari-server/web\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("admDir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/ambari-server/resources/views/work/ADMIN_VIEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.7")]),s._v(".4.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${admDir}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distDir}")]),s._v("/web "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${distDir}")]),s._v("/admin "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${webDir}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"软引用替换成功！, ambari-server 重启中"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ambari-server restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);